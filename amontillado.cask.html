<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>amontillado.cask documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Amontillado 1.0.0-SNAPSHOT API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><span>Namespaces</span></h3><ul><li class="current"><a href="amontillado.cask.html"><span>amontillado.cask</span></a></li><li><a href="amontillado.core.html"><span>amontillado.core</span></a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="amontillado.cask.html#var--%3EBitCask"><span>-&gt;BitCask</span></a></li><li><a href="amontillado.cask.html#var--%3ECaskFile"><span>-&gt;CaskFile</span></a></li><li><a href="amontillado.cask.html#var--%3ECaskFiles"><span>-&gt;CaskFiles</span></a></li><li><a href="amontillado.cask.html#var-allocate"><span>allocate</span></a></li><li><a href="amontillado.cask.html#var-cask-file"><span>cask-file</span></a></li><li><a href="amontillado.cask.html#var-cask-keys"><span>cask-keys</span></a></li><li><a href="amontillado.cask.html#var-check-current-file"><span>check-current-file</span></a></li><li><a href="amontillado.cask.html#var-crc"><span>crc</span></a></li><li><a href="amontillado.cask.html#var-current-file"><span>current-file</span></a></li><li><a href="amontillado.cask.html#var-dead-files"><span>dead-files</span></a></li><li><a href="amontillado.cask.html#var-delete-key"><span>delete-key</span></a></li><li><a href="amontillado.cask.html#var-entry-seq"><span>entry-seq</span></a></li><li><a href="amontillado.cask.html#var-file-record"><span>file-record</span></a></li><li><a href="amontillado.cask.html#var-file-record-no-crc"><span>file-record-no-crc</span></a></li><li><a href="amontillado.cask.html#var-file-tombstone-record"><span>file-tombstone-record</span></a></li><li><a href="amontillado.cask.html#var-id-to-file"><span>id-to-file</span></a></li><li><a href="amontillado.cask.html#var-key-dir-entry"><span>key-dir-entry</span></a></li><li><a href="amontillado.cask.html#var-map-%3ECaskFile"><span>map-&gt;CaskFile</span></a></li><li><a href="amontillado.cask.html#var-map-%3ECaskFiles"><span>map-&gt;CaskFiles</span></a></li><li><a href="amontillado.cask.html#var-new-bitcask"><span>new-bitcask</span></a></li><li><a href="amontillado.cask.html#var-new-cask-files"><span>new-cask-files</span></a></li><li><a href="amontillado.cask.html#var-open-bitcask"><span>open-bitcask</span></a></li><li><a href="amontillado.cask.html#var-read-key"><span>read-key</span></a></li><li><a href="amontillado.cask.html#var-renumber-files"><span>renumber-files</span></a></li><li><a href="amontillado.cask.html#var-write-key"><span>write-key</span></a></li><li><a href="amontillado.cask.html#var-write-to-cask"><span>write-to-cask</span></a></li><li><a href="amontillado.cask.html#var-write-tombstone-to-cask"><span>write-tombstone-to-cask</span></a></li></ul></div><div class="namespace-docs" id="content"><h2>amontillado.cask documentation</h2><pre class="doc"></pre><div class="public" id="var--%3EBitCask"><h3>-&gt;BitCask</h3><div class="usage"><code>(-&gt;BitCask dict files)</code></div><pre class="doc">Positional factory function for class amontillado.cask.BitCask.
</pre></div><div class="public" id="var--%3ECaskFile"><h3>-&gt;CaskFile</h3><div class="usage"><code>(-&gt;CaskFile id channel raf)</code></div><pre class="doc">Positional factory function for class amontillado.cask.CaskFile.
</pre></div><div class="public" id="var--%3ECaskFiles"><h3>-&gt;CaskFiles</h3><div class="usage"><code>(-&gt;CaskFiles files directory limit)</code></div><pre class="doc">Positional factory function for class amontillado.cask.CaskFiles.
</pre></div><div class="public" id="var-allocate"><h3>allocate</h3><div class="usage"><code>(allocate fc n)</code></div><pre class="doc">given a file channel, lock on the channel them bump the channel's position by n

used to pre-allocate space to write in files</pre></div><div class="public" id="var-cask-file"><h3>cask-file</h3><div class="usage"><code>(cask-file index directory)</code></div><pre class="doc"></pre></div><div class="public" id="var-cask-keys"><h3>cask-keys</h3><div class="usage"><code>(cask-keys bc)</code></div><pre class="doc"></pre></div><div class="public" id="var-check-current-file"><h3>check-current-file</h3><div class="usage"><code>(check-current-file cf)</code></div><pre class="doc"></pre></div><div class="public" id="var-crc"><h3>crc</h3><div class="usage"><code>(crc bb)</code></div><pre class="doc">calculate the crc of a byte buffer
</pre></div><div class="public" id="var-current-file"><h3>current-file</h3><div class="usage"><code>(current-file cf)</code></div><pre class="doc"></pre></div><div class="public" id="var-dead-files"><h3>dead-files</h3><div class="usage"><code>(dead-files bc)</code></div><pre class="doc"></pre></div><div class="public" id="var-delete-key"><h3>delete-key</h3><div class="usage"><code>(delete-key bc key)</code></div><pre class="doc"></pre></div><div class="public" id="var-entry-seq"><h3>entry-seq</h3><div class="usage"><code>(entry-seq cask-file)</code></div><pre class="doc"></pre></div><div class="public" id="var-file-record"><h3>file-record</h3><div class="usage"><code>(file-record key value)</code></div><pre class="doc">given a key (bytes) and value (bytes) generate a ByteBuffer for being written to a file.
file-record format is:

crc -- crc of the rest of the record, calculated on the entire
record with the crc field as zeros, 8 bytes, a long

timestamp -- nanoseconds, long

key size -- byte count in key, long

value size -- byte count in value, long

key -- sized as in key size

value -- sized as in value size</pre></div><div class="public" id="var-file-record-no-crc"><h3>file-record-no-crc</h3><div class="usage"><code>(file-record-no-crc ts k v)</code></div><pre class="doc"></pre></div><div class="public" id="var-file-tombstone-record"><h3>file-tombstone-record</h3><div class="usage"><code>(file-tombstone-record key)</code></div><pre class="doc"></pre></div><div class="public" id="var-id-to-file"><h3>id-to-file</h3><div class="usage"><code>(id-to-file directory id)</code></div><pre class="doc"></pre></div><div class="public" id="var-key-dir-entry"><h3>key-dir-entry</h3><div class="usage"><code>(key-dir-entry file-id value-size value-position tstamp)</code></div><pre class="doc"></pre></div><div class="public" id="var-map-%3ECaskFile"><h3>map-&gt;CaskFile</h3><div class="usage"><code>(map-&gt;CaskFile m__5828__auto__)</code></div><pre class="doc">Factory function for class amontillado.cask.CaskFile, taking a map of keywords to field values.
</pre></div><div class="public" id="var-map-%3ECaskFiles"><h3>map-&gt;CaskFiles</h3><div class="usage"><code>(map-&gt;CaskFiles m__5828__auto__)</code></div><pre class="doc">Factory function for class amontillado.cask.CaskFiles, taking a map of keywords to field values.
</pre></div><div class="public" id="var-new-bitcask"><h3>new-bitcask</h3><div class="usage"><code>(new-bitcask directory &amp; [limit])</code></div><pre class="doc"></pre></div><div class="public" id="var-new-cask-files"><h3>new-cask-files</h3><div class="usage"><code>(new-cask-files directory limit)</code></div><pre class="doc"></pre></div><div class="public" id="var-open-bitcask"><h3>open-bitcask</h3><div class="usage"><code>(open-bitcask directory &amp; [limit])</code></div><pre class="doc"></pre></div><div class="public" id="var-read-key"><h3>read-key</h3><div class="usage"><code>(read-key bc key)</code></div><pre class="doc"></pre></div><div class="public" id="var-renumber-files"><h3>renumber-files</h3><div class="usage"><code>(renumber-files directory files)</code></div><pre class="doc"></pre></div><div class="public" id="var-write-key"><h3>write-key</h3><div class="usage"><code>(write-key bc key value)</code></div><pre class="doc"></pre></div><div class="public" id="var-write-to-cask"><h3>write-to-cask</h3><div class="usage"><code>(write-to-cask cask-file key value)</code></div><pre class="doc"></pre></div><div class="public" id="var-write-tombstone-to-cask"><h3>write-tombstone-to-cask</h3><div class="usage"><code>(write-tombstone-to-cask cask-file key)</code></div><pre class="doc"></pre></div></div></body></html>